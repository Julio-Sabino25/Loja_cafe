const wrapper = document.querySelector(".slider-wrapper");
const slides = document.querySelectorAll(".single-slide");
const prevBtn = document.querySelector(".prev-btn");
const nextBtn = document.querySelector(".next-btn");

let idx = 0;

function updateSlidePosition() {
    wrapper.style.transform = `translateX(${-idx * 100}%)`;
    wrapper.style.transition = "transform 0.6s ease-in-out";

    slides.forEach((slide, i) => {
        const text = slide.querySelector(".text-content");

        if (i === idx) {
            slide.classList.add("active");
            
            // Remove e readiciona a classe appear para reiniciar a animação
            if (text) {
                text.classList.remove("appear");
                // Usamos setTimeout para garantir que a remoção seja processada antes de readicionar
                setTimeout(() => {
                    text.classList.add("appear");
                }, 10);
            }
        } else {
            slide.classList.remove("active");
            // Remove a classe appear para que a animação possa ocorrer novamente
            if (text) {
                text.classList.remove("appear");
            }
        }
    });
}

prevBtn.addEventListener("click", () => {
    idx = (idx - 1 + slides.length) % slides.length;
    updateSlidePosition();
});

nextBtn.addEventListener("click", () => {
    idx = (idx + 1) % slides.length;
    updateSlidePosition();
});

// Inicializa
updateSlidePosition();


document.addEventListener('DOMContentLoaded', function() {
    const testimonials = document.querySelectorAll('.single-testimonial');
    const dots = document.querySelectorAll('.testimonial-controls .dot');
    let currentIndex = 0;
    let interval;

    function showTestimonial(index) {
        // Remove a classe active de todos
        testimonials.forEach(testimonial => testimonial.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        // Adiciona a classe active ao testimonial e dot selecionados
        testimonials[index].classList.add('active');
        dots[index].classList.add('active');
        currentIndex = index;
    }

    // Navegação pelos dots
    dots.forEach(dot => {
        dot.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            showTestimonial(index);
            resetInterval();
        });
    });

    // Auto-rotacionar (opcional)
    function nextTestimonial() {
        currentIndex = (currentIndex + 1) % testimonials.length;
        showTestimonial(currentIndex);
    }

    function resetInterval() {
        clearInterval(interval);
        interval = setInterval(nextTestimonial, 5000); // Muda a cada 5 segundos
    }

    // Iniciar o carrossel
    resetInterval();
});